{"version":3,"file":"index.module.js","sources":["../src/components/column.js","../src/components/table.js","../node_modules/style-inject/dist/style-inject.es.js"],"sourcesContent":["//import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function Column(props) {\r\n  const { children, ...xprops } = props;\r\n  if (xprops.numberFormat) xprops.align = \"right\";\r\n  return xprops;\r\n}\r\n\r\nColumn.propTypes = {\r\n  header: PropTypes.string.isRequired,\r\n  width: PropTypes.number,\r\n  dataField: PropTypes.string,\r\n  dataFunc: PropTypes.func,\r\n  numberFormat: PropTypes.string,\r\n  filterable: PropTypes.bool,\r\n  sortable: PropTypes.bool,\r\n  resizable: PropTypes.bool\r\n};\r\nColumn.defaultProps = {\r\n  width: 120,\r\n  dataField: \"value\",\r\n  align: \"left\",\r\n  filterable: false,\r\n  sortable: true,\r\n  resizable: true\r\n};\r\n","import React from \"react\";\r\n//import CloseableInput from \"./../closeableinput\";\r\nimport Column from \"./column\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default class Table extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n      columns: null,\r\n      showFilters: false\r\n    };\r\n    //Variables\r\n    this.datax = [];\r\n    this.filters = [];\r\n    this.lastClick = 0;\r\n    //Referencias\r\n    this.header = null;\r\n    this.body = null;\r\n    //Variables públicas\r\n    this.onClick = props.onClick;\r\n    this.onChange = props.onChange;\r\n    this.highlight = props.highlight;\r\n    //Formatos para números\r\n    this.numberformats = {\r\n      mount: new Intl.NumberFormat(\"en-US\", { minimumFractionDigits: 2, maximumFractionDigits: 2 }),\r\n      money: new Intl.NumberFormat(\"en-US\", { style: \"currency\", currency: \"USD\", maximumFractionDigits: 2 }),\r\n      titles: new Intl.NumberFormat(\"en-US\", { maximumFractionDigits: 0 }),\r\n      rate: new Intl.NumberFormat(\"en-US\", { minimumFractionDigits: 8, maximumFractionDigits: 8 })\r\n    };\r\n  }\r\n  render() {\r\n    this.datax = this.state.subdata2 || this.state.subdata1 || this.state.data;\r\n    this.selectable = this.props.selectable === true && this.datax.length > 0;\r\n    const classes = [\"sittable\"];\r\n    if (this.props.flexible === true) classes.push(\"flexible\");\r\n    if (this.props.small === true) classes.push(\"small\");\r\n    var style = Object.assign({ width: this.state.tablewidth + 2, marginLeft: \"auto\", marginRight: \"auto\" }, this.props.style);\r\n    return (\r\n      <div className={classes.join(\" \")} style={style}>\r\n        <table>\r\n          <thead ref={h => (this.header = h)}>\r\n            <tr>\r\n              {this.state.columns.map((col, i) => (\r\n                <th style={{ minWidth: col.width, maxWidth: col.width }} data-col={i} key={i}>\r\n                  {col.sortable ? <a className=\"icon-sort\" /> : null}\r\n                  {col.filtering ? (\r\n                    <CloseableInput\r\n                      placeholder={col.header}\r\n                      onChange={e => this.filterBy(col.dataField, e.target.value)}\r\n                      onClose={() => {\r\n                        this.state.columns[i].filtering = false;\r\n                        this.filterBy(col.dataField, \"\");\r\n                      }}\r\n                    />\r\n                  ) : (\r\n                    col.header\r\n                  )}\r\n                  {col.filterable && !col.filtering ? <a className=\"icon-filter\" data-col={i} /> : null}\r\n                  {col.resizable ? <span className=\"grip\" /> : null}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n        </table>\r\n        <div ref={o => (this.divbody = o)}>\r\n          <div ref={o => (this.divwidth = o)} className=\"wide\" />\r\n          {this.datax.length === 0 && this.props.loading !== true && <div className=\"info\">Sin información para mostrar</div>}\r\n          {this.props.loading === true && (\r\n            <div className=\"info\">\r\n              <span>\r\n                <span className=\"icon-spin5 animate-spin\" />Espere\r\n              </span>\r\n            </div>\r\n          )}\r\n          <table ref={o => (this.tablebody = o)} width={this.state.tablewidth}>\r\n            <tbody ref={b => (this.body = b)}>{this.renderData()}</tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  componentDidMount() {\r\n    var thrzelem;\r\n    var thrzoffs;\r\n    this.header.onmousedown = e => {\r\n      if (e.target.nodeName === \"A\" && e.target.className.indexOf(\"icon-sort\") === 0) {\r\n        var col = e.target.parentElement.dataset.col;\r\n        this.sortBy(this.state.columns[Number(col)].dataField, e.target);\r\n      } else if (e.target.nodeName === \"A\" && e.target.className === \"icon-filter\") {\r\n        var col = e.target.parentElement.dataset.col;\r\n        this.state.columns[col].filtering = true;\r\n        this.forceUpdate();\r\n      } else if (e.target.nodeName === \"SPAN\" && e.target.className === \"grip\") {\r\n        thrzelem = e.target.parentElement;\r\n        thrzoffs = thrzelem.offsetWidth - event.pageX;\r\n      }\r\n    };\r\n    document.addEventListener(\"mousemove\", e => {\r\n      if (thrzelem) {\r\n        var width = thrzoffs + e.pageX;\r\n        thrzelem.style.minWidth = width + \"px\";\r\n        thrzelem.style.maxWidth = width + \"px\";\r\n      }\r\n    });\r\n    document.addEventListener(\"mouseup\", e => {\r\n      if (thrzelem) {\r\n        var width = thrzelem.offsetWidth;\r\n        this.resizeCol(Number(thrzelem.dataset.col), width);\r\n        thrzelem = undefined;\r\n      }\r\n    });\r\n    this.divbody.onscroll = e => {\r\n      this.header.scrollLeft = this.divbody.scrollLeft;\r\n    };\r\n    this.body.onclick = this.selectionHandler;\r\n  }\r\n  componentDidUpdate() {\r\n    if (this.state.data.length === 0) return;\r\n    const tr1 = this.header.firstChild;\r\n    const tr2 = this.body.firstChild;\r\n    const scrollWidth = this.divbody.offsetWidth - this.divwidth.offsetWidth;\r\n    this.tablebody.width = this.state.tablewidth - scrollWidth;\r\n    const headtds = Array.from(tr1.children);\r\n    const bodytds = Array.from(tr2.children);\r\n    bodytds.forEach((o, i) => {\r\n      var width = o.offsetWidth;\r\n      if (i + 1 === bodytds.length) width += scrollWidth;\r\n      headtds[i].style.minWidth = width + \"px\";\r\n      headtds[i].style.maxWidth = width + \"px\";\r\n    });\r\n  }\r\n  get data() {}\r\n  set data(data) {\r\n    data.forEach((o, i) => {\r\n      o.stb_oid = i;\r\n      o.stb_selected = false;\r\n    });\r\n    this.setState({ data, subdata1: null, subdata2: null });\r\n  }\r\n  get selectedItem() {\r\n    const sdata = this.state.data.filter(o => o.stb_selected);\r\n    return sdata[0] || null;\r\n  }\r\n  set selectedItem(item) {\r\n    this.state.data.forEach(o => (o.stb_selected = o === item));\r\n    this.forceUpdate();\r\n  }\r\n  get selectedIndex() {\r\n    const obj = this.selectedItem;\r\n    return obj === null ? -1 : obj.stb_oid;\r\n  }\r\n  set selectedIndex(i) {\r\n    this.state.data.forEach(o => (o.stb_selected = o.stb_oid === i));\r\n    this.forceUpdate();\r\n  }\r\n  renderTd(column, object, i) {\r\n    var val = object[column.dataField] !== undefined ? object[column.dataField] : null;\r\n    if (column.dataFunc) {\r\n      val = column.dataFunc(val, object);\r\n    }\r\n    if (column.numberFormat && this.numberformats[column.numberFormat]) {\r\n      if (val === undefined || val === null || val === \"\") val = \"\";\r\n      else val = this.numberformats[column.numberFormat].format(val);\r\n    }\r\n    return (\r\n      <td key={i} width={column.width} style={{ textAlign: column.align }}>\r\n        {val}\r\n      </td>\r\n    );\r\n  }\r\n  renderTr(object, i) {\r\n    const classes_array = [];\r\n    if (object.stb_selected) classes_array.push(\"selected\");\r\n    if (this.highlight(object)) classes_array.push(\"highlighted\");\r\n    const classes_str = classes_array.join(\" \");\r\n    return (\r\n      <tr data-row={i} key={i} data-oid={object.stb_oid} className={classes_str} style={{}}>\r\n        {this.state.columns.map((column, i) => this.renderTd(column, object, i))}\r\n      </tr>\r\n    );\r\n  }\r\n  doubleClick = miliseconds => {\r\n    var threshold = miliseconds || 450;\r\n    var t0 = new Date().getTime();\r\n    if (t0 - this.lastClick <= threshold) return true;\r\n    this.lastClick = t0;\r\n    return false;\r\n  };\r\n  filter() {\r\n    var keys = Object.keys(this.filters);\r\n    if (keys.length > 0) {\r\n      const subdata = [];\r\n      for (var i = 0; i < this.state.data.length; i++) {\r\n        var push = true;\r\n        for (var j = 0; j < keys.length; j++) {\r\n          push =\r\n            push &&\r\n            ((this.filters[keys[j]].mode === \"contains\" && (\"\" + this.state.data[i][keys[j]]).toLowerCase().indexOf(this.filters[keys[j]].data) > -1) ||\r\n              (this.filters[keys[j]].mode === \"equals\" && this.state.data[i][keys[j]].toLowerCase() == this.filters[keys[j]].data));\r\n        }\r\n        if (push) subdata.push(this.state.data[i]);\r\n      }\r\n      this.setState({ subdata1: subdata });\r\n    } else {\r\n      this.setState({ subdata1: null, subdata2: null });\r\n    }\r\n  }\r\n  filterBy(column, text_to_search, mode) {\r\n    text_to_search = text_to_search.toLowerCase().trim();\r\n    if (this.lastSort !== undefined) {\r\n      this.lastSort.className = \"icon-sort\";\r\n      this.lastSort = undefined;\r\n      this.sortMode = undefined;\r\n      this.sortColumn = undefined;\r\n    }\r\n    if (text_to_search === \"\") {\r\n      delete this.filters[column];\r\n    } else {\r\n      if (this.filters[column]) {\r\n        this.filters[column].data = text_to_search;\r\n      } else {\r\n        this.filters[column] = {\r\n          mode: mode || \"contains\",\r\n          data: text_to_search\r\n        };\r\n      }\r\n    }\r\n    this.filter();\r\n  }\r\n  renderData() {\r\n    return this.datax.map((d, i) => this.renderTr(d, i));\r\n  }\r\n  resizeCol(i, width) {\r\n    this.state.columns[i].width = width;\r\n    this.forceUpdate();\r\n  }\r\n  selectionHandler = e => {\r\n    if (this.selectable === false) return;\r\n    var tr = e.target;\r\n    var td = null;\r\n    while (tr != this.body) {\r\n      if (tr.nodeName === \"TD\") td = tr;\r\n      if (tr.nodeName === \"TR\") break;\r\n      tr = tr.parentElement;\r\n    }\r\n    const oid = Number(tr.dataset.oid);\r\n    if (this.selectedIndex !== oid) {\r\n      this.state.data.forEach((o, i) => (o.stb_selected = i === oid));\r\n      this.forceUpdate();\r\n      this.selectedIndex = oid;\r\n      this.onChange(this.selectedItem, oid, td.cellIndex, tr);\r\n    }\r\n    this.onClick(this.selectedItem, oid, td.cellIndex, tr);\r\n  };\r\n  sortBy(col, anchor) {\r\n    var data_origin = this.state.subdata1 || this.state.data;\r\n    var data_ordered = [];\r\n    for (var i = 0; i < data_origin.length; i++) {\r\n      data_ordered[i] = data_origin[i];\r\n    }\r\n    if (this.lastSort !== undefined && this.lastSort !== anchor) {\r\n      this.lastSort.className = \"icon-sort\";\r\n    }\r\n    if (this.sortColumn === undefined || this.sortColumn !== col) {\r\n      this.sortMode = \"ASC\";\r\n      this.sortColumn = col;\r\n      anchor.className = \"icon-sort-up\";\r\n    } else if (this.sortColumn === col && this.sortMode === \"ASC\") {\r\n      this.sortMode = \"DESC\";\r\n      anchor.className = \"icon-sort-down\";\r\n    } else {\r\n      this.sortMode = undefined;\r\n      this.sortColumn = undefined;\r\n      anchor.className = \"icon-sort\";\r\n      this.setState({ subdata2: data_origin });\r\n      return;\r\n    }\r\n    //Burbuja\r\n    for (var i = data_ordered.length - 1; i >= 0; i--) {\r\n      for (var j = 1; j <= i; j++) {\r\n        if ((this.sortMode === \"ASC\" && data_ordered[j][col] < data_ordered[j - 1][col]) || (this.sortMode === \"DESC\" && data_ordered[j][col] > data_ordered[j - 1][col])) {\r\n          var tmp = data_ordered[j];\r\n          data_ordered[j] = data_ordered[j - 1];\r\n          data_ordered[j - 1] = tmp;\r\n        }\r\n      }\r\n    }\r\n    this.lastSort = anchor;\r\n    this.setState({ subdata2: data_ordered });\r\n  }\r\n  tabularData() {\r\n    var tmp = \"\";\r\n    const data = this.state.subdata2 || this.state.subdata1 || this.state.data;\r\n    for (var i = 0; i < data.length; i++) {\r\n      if (i > 0) tmp += \"\\n\";\r\n      var obj = data[i];\r\n      for (var j = 0; j < this.state.columns.length; j++) {\r\n        if (j > 0) tmp += \"\\t\";\r\n        var val = obj[this.state.columns[j].dataField];\r\n        tmp += val === undefined || val === null ? \"\" : val;\r\n      }\r\n    }\r\n    return tmp;\r\n  }\r\n  static getDerivedStateFromProps(props, state) {\r\n    var tablewidth = 0;\r\n    const newstate = {};\r\n    const columns = [];\r\n    React.Children.forEach(props.children, child => {\r\n      if (child.type === Column) columns.push(Column(child.props));\r\n    });\r\n    if (state.columns === null || state.columns.length !== columns.length) {\r\n      columns.forEach(col => (tablewidth += col.width));\r\n      newstate.tablewidth = tablewidth;\r\n      newstate.columns = columns;\r\n    } else {\r\n      state.columns.forEach(col => (tablewidth += col.width));\r\n      if (tablewidth !== state.tablewidth) newstate.tablewidth = tablewidth;\r\n    }\r\n    if (props.data !== undefined && props.data !== state.data) {\r\n      props.data.forEach((o, i) => {\r\n        o.stb_oid = i;\r\n        o.stb_selected = false;\r\n      });\r\n      newstate.data = props.data;\r\n      newstate.subdata1 = null;\r\n      newstate.subdata2 = null;\r\n    }\r\n    return newstate;\r\n  }\r\n}\r\n\r\nTable.propTypes = {\r\n  selectable: PropTypes.bool,\r\n  flexible: PropTypes.bool,\r\n  data: PropTypes.array,\r\n  highlight: PropTypes.func\r\n};\r\nTable.defaultProps = {\r\n  selectable: false,\r\n  flexible: false,\r\n  onClick: () => undefined,\r\n  onChange: () => undefined,\r\n  highlight: () => false\r\n};\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n"],"names":["Column","props","children","xprops","numberFormat","align","propTypes","PropTypes","string","isRequired","number","func","bool","defaultProps","Table","doubleClick","threshold","miliseconds","t0","Date","getTime","lastClick","selectionHandler","selectable","tr","e","target","td","body","nodeName","parentElement","oid","Number","dataset","selectedIndex","state","data","forEach","o","i","stb_selected","forceUpdate","onChange","selectedItem","cellIndex","onClick","datax","filters","header","highlight","numberformats","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","style","currency","subdata2","subdata1","length","classes","flexible","push","small","Object","assign","width","tablewidth","marginLeft","marginRight","join","h","columns","map","col","minWidth","maxWidth","sortable","filtering","filterBy","dataField","value","filterable","resizable","divbody","divwidth","loading","tablebody","b","renderData","thrzelem","thrzoffs","onmousedown","className","indexOf","sortBy","offsetWidth","event","pageX","addEventListener","resizeCol","undefined","onscroll","scrollLeft","onclick","tr1","firstChild","tr2","scrollWidth","headtds","Array","from","bodytds","column","object","val","dataFunc","format","textAlign","classes_array","classes_str","stb_oid","renderTd","keys","subdata","j","mode","toLowerCase","setState","text_to_search","trim","lastSort","sortMode","sortColumn","filter","d","renderTr","anchor","data_origin","data_ordered","tmp","obj","sdata","item","newstate","Children","child","type","React","Component","array"],"mappings":"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"}